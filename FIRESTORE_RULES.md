# üîí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Firestore

## ‚ö†Ô∏è –¢–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –±–ª–æ–∫–∏—Ä—É—é—Ç –í–°–ï –æ–ø–µ—Ä–∞—Ü–∏–∏!

–í–∞—à–∏ —Ç–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞:
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if false;  // ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç –í–°–ï –æ–ø–µ—Ä–∞—Ü–∏–∏!
    }
  }
}
```

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // –ö–æ–ª–ª–µ–∫—Ü–∏—è users - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –∏ –ø–∏—Å–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
    match /users/{userId} {
      // –†–∞–∑—Ä–µ—à–∞–µ–º —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
      // 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (request.auth != null)
      // 2. ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å ID —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (request.auth.uid == userId)
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }

    // –ë–ª–æ–∫–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–º –∫–æ–ª–ª–µ–∫—Ü–∏—è–º
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!)

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–µ—à–∞—é—Ç –í–°–ï –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    // –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¢–û–õ–¨–ö–û –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
```

## üìù –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Firebase Console

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://console.firebase.google.com/
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: **background-editor-248d6**
3. –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–∂–º–∏—Ç–µ **"Firestore Database"**

### –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "Rules"

1. –í –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Rules"** (–ü—Ä–∞–≤–∏–ª–∞)
2. –í—ã —É–≤–∏–¥–∏—Ç–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–∞–≤–∏–ª

### –®–∞–≥ 3: –í—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ –í–∞—Ä–∏–∞–Ω—Ç–∞ 1 –≤—ã—à–µ** (–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

### –®–∞–≥ 4: –û–ø—É–±–ª–∏–∫—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞

1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Publish"** (–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å) –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é

## üîç –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª:

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª:

```javascript
match /users/{userId} {
  allow read, write: if request.auth != null && request.auth.uid == userId;
}
```

- `match /users/{userId}` - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `users` —Å –ª—é–±—ã–º ID
- `{userId}` - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—ç—Ç–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Firebase Auth)
- `request.auth != null` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- `request.auth.uid == userId` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å ID –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `allow read, write` - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π

### –ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:

‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç:**
- –ß–∏—Ç–∞—Ç—å —Å–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `users`
- –ó–∞–ø–∏—Å—ã–≤–∞—Ç—å/–æ–±–Ω–æ–≤–ª—è—Ç—å —Å–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `users`

‚ùå **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –º–æ–∂–µ—Ç:**
- –ß–∏—Ç–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ó–∞–ø–∏—Å—ã–≤–∞—Ç—å/–æ–±–Ω–æ–≤–ª—è—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –î–æ—Å—Ç—É–ø –∫ –ª—é–±—ã–º –¥—Ä—É–≥–∏–º –∫–æ–ª–ª–µ–∫—Ü–∏—è–º

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª –≤ Firebase Console:

1. –í Firebase Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ: **Firestore Database** ‚Üí **Rules**
2. –ù–∞–∂–º–∏—Ç–µ **"Rules Playground"** (–ò–≥—Ä–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞ –ø—Ä–∞–≤–∏–ª)
3. –í—ã–±–µ—Ä–∏—Ç–µ:
   - **Location:** `users/{userId}` (–∑–∞–º–µ–Ω–∏—Ç–µ `{userId}` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID)
   - **Authenticated:** `true`
   - **User ID:** –≤–∞—à ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - **Operation:** `write` –∏–ª–∏ `read`
4. –ù–∞–∂–º–∏—Ç–µ **"Run"** (–ó–∞–ø—É—Å—Ç–∏—Ç—å)
5. –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: ‚úÖ **"Allow"** (–†–∞–∑—Ä–µ—à–∏—Ç—å)

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!**
   - –ü—Ä–∞–≤–∏–ª–∞ `allow read, write: if request.auth != null` —Ä–∞–∑—Ä–µ—à–∞—é—Ç –≤—Å–µ–º –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –¥–æ—Å—Ç—É–ø –∫–æ –í–°–ï–ú –¥–∞–Ω–Ω—ã–º
   - –≠—Ç–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

2. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –≤–∞—à–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Rules Playground –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

3. **–ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ:**
   - –ü–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª–∞ –≤—Å—Ç—É–ø–∞—é—Ç –≤ —Å–∏–ª—É —Å—Ä–∞–∑—É
   - –ò–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –û—à–∏–±–∫–∞ "Missing or insufficient permissions":

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∞–≤–∏–ª–∞ –±–ª–æ–∫–∏—Ä—É—é—Ç –¥–æ—Å—Ç—É–ø

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã

### –û—à–∏–±–∫–∞ "Permission denied":

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∞–≤–∏–ª–∞ –Ω–µ —Ä–∞–∑—Ä–µ—à–∞—é—Ç –æ–ø–µ—Ä–∞—Ü–∏—é

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ Firebase Console
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–∞–≤–∏–ª
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã

### –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è:

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∞–≤–∏–ª–∞ –±–ª–æ–∫–∏—Ä—É—é—Ç –∑–∞–ø–∏—Å—å

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ Firebase Console
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ = ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

**–ì–æ—Ç–æ–≤–æ!** –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤–∏–ª –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–º–æ–∂–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å API –∫–ª—é—á–∏ –∏–∑ Firestore! üéâ

