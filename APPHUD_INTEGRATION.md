# üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è AppHud

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞
- ‚úÖ –ü–∞–∫–µ—Ç `apphud: ^3.0.1` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `pubspec.yaml`
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ `flutter pub get`

### 2. –°–æ–∑–¥–∞–Ω AppHudService
- ‚úÖ –§–∞–π–ª: `lib/services/apphud_service.dart`
- ‚úÖ Singleton –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –µ–¥–∏–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LoggerService –∏ AnalyticsService

### 3. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ `init()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AppHud —Å API –∫–ª—é—á–æ–º –∏ user ID
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞—Ç—Ä–∏–±—É—Ü–∏–∏

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ `checkSubscriptionStatus()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ `getSubscription()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ `getNonRenewingPurchases()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º—ã—Ö –ø–æ–∫—É–ø–æ–∫

#### –ü–æ–∫—É–ø–∫–∏
- ‚úÖ `purchaseProduct()` - –ø–æ–∫—É–ø–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∞
- ‚úÖ `restorePurchases()` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–æ–∫

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `getPaywalls()` - –ø–æ–ª—É—á–µ–Ω–∏–µ paywalls (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ API)
- ‚úÖ `getPlacements()` - –ø–æ–ª—É—á–µ–Ω–∏–µ placements (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ API)
- ‚úÖ `getProductsFromPaywall()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏–∑ paywall

#### –¶–µ–Ω—ã –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ `getProductPrice()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω—ã –ø—Ä–æ–¥—É–∫—Ç–∞ —Å –≤–∞–ª—é—Ç–æ–π
- ‚úÖ `getProductCurrency()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤–∞–ª—é—Ç—ã –ø—Ä–æ–¥—É–∫—Ç–∞
- ‚úÖ `getProductPriceLocale()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª–∏ —Ü–µ–Ω—ã

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- ‚úÖ `updateUserID()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ user ID
- ‚úÖ `setUserProperty()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞

#### Listener –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ `addSubscriptionListener()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ listener –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ–¥–ø–∏—Å–æ–∫
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞—Ç—Ä–∏–±—É—Ü–∏–∏

#### AppsFlyer
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AppsFlyer
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ SDK

#### Firebase
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Firebase Analytics
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ SDK

#### Apple Search Ads
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤—ã–∑–æ–≤ `Apphud.collectSearchAdsAttribution()`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ü–∏–∏ –Ω–∞ iOS

### 5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ main.dart
- ‚úÖ AppHud –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API –∫–ª—é—á –∏–∑ `ApiConfig.appHudApiKey`
- ‚úÖ –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è user ID –∏–∑ AuthService

## ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ç–æ–¥—ã —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ API –ø–∞–∫–µ—Ç–∞ apphud –≤–µ—Ä—Å–∏–∏ 3.0.1:

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ paywalls –∏ placements**
   - –ú–µ—Ç–æ–¥—ã `getPaywalls()` –∏ `getPlacements()` –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ TODO
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ apphud

2. **Listener –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π**
   - –ú–µ—Ç–æ–¥ `addSubscriptionListener()` —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
   - –í–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
     - `Apphud.addListener(callback)`
     - `Apphud.addDidChangeUserPurchasesListener(callback)`
     - `Apphud.subscriptionUpdates().listen(callback)`

3. **–ü–æ–∫—É–ø–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∞**
   - –ú–µ—Ç–æ–¥ `purchaseProduct()` –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ–¥–∞—á–∏ product

4. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞**
   - –ú–µ—Ç–æ–¥ `setUserProperty()` –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å `ApphudUserPropertyKey` –≤–º–µ—Å—Ç–æ `String`

5. **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–∏–ø—ã (ApphudSubscription, ApphudProduct, ApphudPaywall –∏ —Ç.–¥.)
   - –º–æ–≥—É—Ç –∏–º–µ—Ç—å –¥—Ä—É–≥–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –≤–µ—Ä—Å–∏–∏ 3.0.1

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

API –∫–ª—é—á AppHud –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `lib/config/api_config.dart`:
```dart
static const String appHudApiKey = 'app_Z44sHCCXqhP5FCBDa8SxKBLB7VLpga';
static const String appHudPaywallId = 'main_paywall';
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (—É–∂–µ –≤ main.dart):
```dart
await AppHudService.instance.init(
  apiKey: ApiConfig.appHudApiKey,
  enableAttribution: true,
);
```

### –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏:
```dart
final hasActive = await AppHudService.instance.checkSubscriptionStatus();
```

### –ü—Ä–∏–º–µ—Ä –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∫—É–ø–æ–∫:
```dart
final result = await AppHudService.instance.restorePurchases();
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–∞–∫–µ—Ç–∞ apphud:
- Pub.dev: https://pub.dev/packages/apphud
- –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://docs.apphud.com/

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π API –ø–∞–∫–µ—Ç–∞ apphud 3.0.1
2. –û–±–Ω–æ–≤–∏—Ç–µ –º–µ—Ç–æ–¥—ã, –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ –∫–∞–∫ TODO
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–∫—É–ø–∫–∏ –≤ sandbox —Ä–µ–∂–∏–º–µ
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ paywalls –≤ –ø–∞–Ω–µ–ª–∏ AppHud
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∞—Ç—Ä–∏–±—É—Ü–∏—é —Å AppsFlyer, Firebase –∏ Apple Search Ads

